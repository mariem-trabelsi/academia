<div class="trending-list">
  
  <div *ngIf="loading" class="loading-state">
    <div class="loader"></div>
    <p>Loading top rated articles...</p>
  </div>
  
  <div *ngIf="error" class="error-state">
    <p>{{ error }}</p>
    <button (click)="loadTopArticles()">Try Again</button>
  </div>
  
  <div *ngIf="!loading && !error">
    <div *ngIf="topArticles.length === 0" class="empty-state">
      <p>No trending articles available yet.</p>
    </div>
    
    <div class="trending-grid" *ngIf="topArticles.length > 0">
      <div *ngFor="let article of topArticles; let i = index" class="article-card" [routerLink]="['/papers', article.id]">
        <div class="rank-badge">{{ i + 1 }}</div>
        <div class="cover-image" [style.background-image]="article.articleCover ? 'url(' + article.articleCover + ')' : 'none'">
          <div class="domain-badge">{{article.domain?.name}}</div>
        </div>
        <div class="article-content">
          <h3 class="article-title">{{ article.title }}</h3>
          <div class="author">{{ article.authorName }}</div>
          <p class="article-abstract">{{article.abstract_ | slice:0:120}}{{article.abstract_ && article.abstract_.length > 120 ? '...' : ''}}</p>
          <div class="article-footer">
            <div class="metadata">
              <div class="date">{{article.createdDate | date:'mediumDate'}}</div>
              <div class="rating">
                <div class="rating-label">Average Rating:</div>
                <div class="stars">
                  <span *ngFor="let star of getRatingStars(getArticleRating(article))" class="star">
                    <i *ngIf="star === 1" class="fas fa-star"></i>
                    <i *ngIf="star === 0.5" class="fas fa-star-half-alt"></i>
                    <i *ngIf="star === 0" class="far fa-star"></i>
                  </span>
                </div>
                <span class="rating-value">{{getArticleRating(article) | number:'1.1-1'}}</span>
              </div>
            </div>
            <button class="read-more">
              <span>Read</span>
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 